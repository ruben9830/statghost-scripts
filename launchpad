#!/bin/bash

# GhostOps Launchpad – Spooky Edition
clear
echo -e "\e[95m"

# 🎵 Play spooky intro music (prefer ffplay, fallback to mpg123)
if [[ -f ./ghost-dreamer.mp3 ]]; then
  if command -v ffplay &> /dev/null; then
    ffplay -nodisp -autoexit -volume 60 ./ghost-dreamer.mp3 >/dev/null 2>&1 &
  elif command -v mpg123 &> /dev/null; then
    mpg123 -q ./ghost-dreamer.mp3 &
  else
    echo "🔇 No audio player (ffplay or mpg123) found. Skipping music..."
  fi
fi

# 👻 Glowing animated ghost banner
for i in {1..3}; do
  echo -e "\e[5m"
  cat << "EOF"
   ██████╗  ██████╗  ██████╗ ███████╗████████╗
  ██╔═══██╗██╔═══██╗██╔════╝ ██╔════╝╚══██╔══╝
  ██║   ██║██║   ██║██║  ███╗█████╗     ██║
  ██║   ██║██║   ██║██║   ██║██╔══╝     ██║
  ╚██████╔╝╚██████╔╝╚██████╔╝███████╗   ██║
   ╚═════╝  ╚═════╝  ╚═════╝ ╚══════╝   ╚═╝
     👻 Welcome to the GhostOps Launchpad 👻
EOF
  echo -e "\e[0m"
  sleep 0.4
  clear
done

# Static banner
echo -e "\e[92m"
cat << "EOF"
██████╗  ██████╗  ██████╗ ███████╗████████╗
██╔══██╗██╔═══██╗██╔════╝ ██╔════╝╚══██╔══╝
██║  ██║██║   ██║██║  ███╗█████╗     ██║
██║  ██║██║   ██║██║   ██║██╔══╝     ██║
██████╔╝╚██████╔╝╚██████╔╝███████╗   ██║
╚═════╝  ╚═════╝  ╚═════╝ ╚══════╝   ╚═╝
     👻 Welcome to the GhostOps Launchpad 👻
EOF
echo -e "\e[0m"
sleep 1

# Main menu loop
while true; do
  echo ""
  echo "Select a tool to run:"
  echo ""
  echo "  1) Find IP Info (Batch Mode)"
  echo "  2) DNS Query Tool"
  echo "  3) Email Flow Checker"
  echo "  4) SPF Failure Finder"
  echo "  5) Linux Command Trainer"
  echo "  6) SPF Spoof Test"
  echo "  7) Get Mail Client Settings"
  echo "  8) DNS & Host Health Checker"
  echo "  9) Verify SMTP Connectivity"
  echo " 10) Web Service Quick Test"
  echo " 11) Packet Test Lab (Wireshark)"
  echo " 12) GhostOps Notes Viewer"
  echo " 13) Task Timer (Time Tracker)"
  echo " 14) NOC Troubleshooting Assistant"
  echo " 15) HTTP Status Checker"
  echo " 16) System Info Report"
  echo " 17) DNS Blacklist Check"
  echo " 18) TCP Port Scanner"
  echo " 19) WHOIS Lookup Tool"
  echo " 20) AI Triage Assistant"
  echo " 21) Log Error Grabber"
  echo " 99) Run Self-Test (Verify All Tools)"
  echo "  0) Exit"
  echo ""

  read -p "Enter your choice: " choice

  case $choice in
    1) ./find_ip_info_batch.sh ;;
    2) ./dns_query_tool.sh ;;
    3) ./email_flow_checker.sh ;;
    4) ./spf_failure_finder.sh ;;
    5) ./linux_command_trainer.sh ;;
    6) ./spf_spoof_test.sh ;;
    7) ./get_mail_settings.sh ;;
    8) ./domain_health_check.sh ;;
    9) ./smtp_tester.sh ;;
   10) ./web_quick_check.sh ;;
   11) ./packet_lab.sh ;;
   12) ./view_ghostnotes.sh ;;
   13) ./timer_tool.sh ;;
   14) ./statghost-cli.sh ;;
   15) ./http_status_checker.sh ;;
   16) ./sysinfo_report.sh ;;
   17) ./blacklist_check.sh ;;
   18) ./port_scanner.sh ;;
   19) ./whois_lookup.sh ;;
   20) ./ai_triage.sh ;;
   21) ./log_error_grabber.sh ;;
   99)
     echo "🧪 Running Self-Test for All Tools..."
     echo ""
     tool_scripts=(
       find_ip_info_batch.sh
       dns_query_tool.sh
       email_flow_checker.sh
       spf_failure_finder.sh
       linux_command_trainer.sh
       spf_spoof_test.sh
       get_mail_settings.sh
       domain_health_check.sh
       smtp_tester.sh
       web_quick_check.sh
       packet_lab.sh
       view_ghostnotes.sh
       timer_tool.sh
       statghost-cli.sh
       http_status_checker.sh
       sysinfo_report.sh
       blacklist_check.sh
       port_scanner.sh
       whois_lookup.sh
       ai_triage.sh
       log_error_grabber.sh
     )
     for script in "${tool_scripts[@]}"; do
       if [ -f "$script" ]; then
         if [ -x "$script" ]; then
           echo "✅ $script found and executable"
         else
           echo "⚠️  $script found but not executable (run: chmod +x $script)"
         fi
       else
         echo "❌ $script is missing"
       fi
     done
     echo ""
     read -p "🔁 Press Enter to return to menu..."
     ;;
    0) echo "👻 Exiting GhostOps..."; sleep 1; break ;;
    *) echo "❌ Invalid choice. Try again." ;;
  esac

  echo ""
  read -p "🔁 Press Enter to return to menu..."
  clear
done
